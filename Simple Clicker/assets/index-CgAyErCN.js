var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-UvlxNa5i.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var i=s();class o extends Phaser.GameObjects.Text{constructor(t,e,s,i,o,n){super(t,e,s,i,o),this.setInteractive(),this.on("pointerover",(()=>{this.setColor("#ff0000")})),this.on("pointerout",(()=>{this.setColor("#ffffff")})),this.on("pointerdown",n),t.add.existing(this)}}const n=(t,e)=>Math.round(t*e*10)/(10*e);class a{constructor(t,s,i,o){e(this,"name"),e(this,"costs"),e(this,"cps"),e(this,"multiplier"),e(this,"quantity",0),this.name=t,this.costs=s,this.cps=i,this.multiplier=o}tryBuy(t){let e=-1;return t>=this.costs&&(e=this.costs,this.quantity+=1,this.costs=n(this.costs*this.multiplier,2)),e}get totalCPS(){return this.cps*this.quantity}}const r=[new a("Carte au trÃ©sor",5,.5,1.1),new a("Boulangerie",20,2,1.3)];class h extends Phaser.GameObjects.Container{constructor(t,e,s,i){super(t);const n=()=>`Cost: ${i.costs}\nHave: ${i.quantity}\nCPS: ${i.quantity*i.cps}`,a=new Phaser.GameObjects.Text(t,0,0,i.name,{}),r=new Phaser.GameObjects.Text(t,0,0,n(),{}),h=new o(t,0,0,"Buy",{},(()=>{const e=i.tryBuy(t.getCoins);e>0&&(t.addCoin(-e),r.setText(n()))}));this.add([a,r,h]),a.setPosition(0,0),r.setPosition(0,a.height),h.setPosition(0,a.height+r.height),t.add.existing(this),this.setPosition(e,s),this.width=Math.max(a.width,r.width,h.width),this.height=a.height+r.height+h.height}}class c extends i.Scene{constructor(){super({key:"Game"}),e(this,"coins",0),e(this,"gameWidth"),e(this,"gameHeight"),e(this,"coinsText")}preload(){const{width:t,height:e}=this.sys.game.canvas;this.gameWidth=t,this.gameHeight=e}create(){this.coinsText=new Phaser.GameObjects.Text(this,0,0,"Default",{}),this.add.existing(this.coinsText);const t=new o(this,this.gameWidth/2,this.gameHeight/2,"Get Coins !",{},(()=>()=>{this.addCoin(1)})());t.setPosition(this.gameWidth/2-t.width/2,this.gameHeight/2-t.height/2);let e=0;for(const s of r){const t=new h(this,0,0,s);t.setPosition(e,this.gameHeight-t.height),e+=t.width+20}}update(t,e){let s=0;for(const o of r)s+=o.totalCPS;const i=s*e/1e3;console.log(`total_cps(${s}) * delta(${e}) = ${i}`),this.addCoin(i)}addCoin(t){this.coins+=t,this.updateText()}updateText(){this.coinsText.setText(`Coins: ${n(this.coins,2)}`)}get getCoins(){return this.coins}}class d extends i.Scene{constructor(){super({key:"MainMenu"})}preload(){this.load.setPath("assets"),this.load.image("background","bg.png"),this.load.image("logo","logo.png")}create(){this.add.image(512,384,"background"),this.add.image(512,350,"logo").setDepth(100),new o(this,512,490,"Launch Game",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"},(()=>{this.scene.start("Game")})).setOrigin(.5).setDepth(100)}}const l={type:i.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:i.Scale.FIT,autoCenter:i.Scale.CENTER_BOTH},scene:[d,c]};document.addEventListener("DOMContentLoaded",(()=>{new i.Game({...l,parent:"game-container"})}));
